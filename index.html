<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drops Coffee App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <link rel="stylesheet" href="App/Frontend/CSS/style.css"> -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
        }


        .floating-cart-button {
            position: fixed;
            bottom: 100px;
            /* Adjust this value to position it above the navbar */
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            /* Initial position (hidden) */
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px) saturate(80%);
            color: white;
            padding: 12px 24px;
            border-radius: 9999px;
            z-index: 997;
            opacity: 0;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .floating-cart-button.visible {
            transform: translateX(-50%) translateY(0);
            /* Visible position */
            opacity: 1;
        }

        .floating-cart-button:hover {
            background-color: rgba(0, 0, 0, 0.9);
        }

        .content-wrapper {
            min-height: 100vh;
            padding-bottom: 100px;
        }

        .floating-navbar {
            position: fixed;
            bottom: 30px;
            left: 50%;
            z-index: 998;
            transform: translateX(-50%);
            width: calc(100% - 40px);
            max-width: 500px;
            border-radius: 9999px;
            /* This makes it fully rounded/pill shaped */
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .floating-navbar nav {
            padding: 1rem 1.5rem;
            /* Slightly more horizontal padding */
        }

        .floating-navbar svg {
            width: 28px;
            height: 28px;
        }

        .nav-item {
            position: relative;
            transition: transform 0.3s ease;
            z-index: 999;
            /* Higher z-index than floating button */
        }

        .nav-item.active {
            transform: translateY(-4px);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background-color: white;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .page-transition {
            animation: fadeIn 0.3s ease-in-out;
        }

        .cart-button,
        .size-button {
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 8px;
        }

        .cart-button {
            right: 8px;
        }

        .size-button {
            left: 8px;
        }

        .cart-button.expanded {
            width: 96px;
        }

        .cart-button svg {
            transition: all 0.3s ease;
        }

        .cart-button.expanded .plus-icon {
            display: none;
        }

        .cart-button .counter {
            display: none;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .cart-button.expanded .counter {
            display: inline;
        }

        .cart-button .minus-icon,
        .cart-button .plus-icon-small {
            display: none;
        }

        .cart-button.expanded .minus-icon,
        .cart-button.expanded .plus-icon-small {
            display: flex;
        }

        .cart-button.expanded .minus-icon {
            position: absolute;
            left: 8px;
        }

        .cart-button.expanded .plus-icon-small {
            position: absolute;
            right: 8px;
        }

        .size-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .size-popup.active {
            display: flex;
        }

        .size-popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .size-option {
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .size-option:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (min-width: 768px) {
            .floating-navbar {
                bottom: 30px;
                max-width: 600px;
            }
        }
    </style>
</head>

<body class="bg-gray-100">
    <div class="content-wrapper">
        <!-- Header -->
        <header class="bg-white shadow-md">
            <div class="container mx-auto px-4 py-6 flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-800">drops</h1>
                <!-- <div class="flex items-center space-x-4">
                    <button class="text-gray-600 hover:text-gray-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                    </button>
                </div> -->
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <h2 id="categoryTitle" class="text-2xl font-semibold mb-6 text-gray-800">All Items</h2>
            <div id="productGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Products will be dynamically inserted here -->
            </div>
        </main>
    </div>

    <!-- Floating Footer Navigation -->
    <!-- Floating Footer Navigation -->
    <footer class="floating-navbar">
        <nav class="flex justify-around items-center py-4">
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="clipboard">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                    <path fill-rule="evenodd"
                        d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z"
                        clip-rule="evenodd" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="user">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                        clip-rule="evenodd" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors active" data-category="all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="cart">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="options">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                        clip-rule="evenodd" />
                </svg>
            </button>
        </nav>
    </footer>

    <!-- Size Selection Popup -->
    <div id="sizePopup" class="size-popup">
        <div class="size-popup-content">
            <h3 class="text-xl font-semibold mb-4">Select Size</h3>
            <button class="size-option" data-size="S">Small</button>
            <button class="size-option" data-size="M">Medium</button>
            <button class="size-option" data-size="L">Large</button>
        </div>
    </div>

    <!-- <script src="App/Frontend/JS/script.js"></script> -->
    <script>
        if (!window.cartStorage) {
            window.cartStorage = [];
        }
        // JSON data for coffee products
        const coffeeProducts = [{
                id: 1,
                name: "Caramel Macchiato",
                price: 150,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 2,
                name: "Latte",
                price: 140,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 3,
                name: "Cappuccino",
                price: 130,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 4,
                name: "Iced Americano",
                price: 120,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "cold"
            },
            {
                id: 5,
                name: "Espresso",
                price: 110,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 6,
                name: "Iced Mocha",
                price: 160,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "cold"
            },
            {
                id: 7,
                name: "Croissant",
                price: 80,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "food"
            },
            {
                id: 8,
                name: "Cheesecake",
                price: 135,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "dessert"
            }
        ];

        // Object to store counter values
        const counterValues = {};

        // Object to store size selections
        const sizeSelections = {};

        // Function to create a product card
        function createProductCard(product) {
            const count = counterValues[product.id] || 0;
            const isExpanded = count > 0;
            const size = sizeSelections[product.id] || 'S';
            return `
                <div class="bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 relative pb-16">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">${product.name}</h3>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600 font-medium">${product.price} Taka</span>
                        </div>
                    </div>
                    <button id="size-btn-${product.id}" class="size-button text-white w-8 h-8 rounded-full" onclick="openSizePopup(${product.id})">
                        ${size}
                    </button>
                    <div id="cart-btn-${product.id}" class="cart-button text-white w-8 h-8 rounded-full ${isExpanded ? 'expanded' : ''}">
                        <button class="plus-icon w-full h-full flex items-center justify-center" onclick="addToCart(${product.id})">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </button>
                        <span class="counter">${count}</span>
                        <button class="minus-icon w-8 h-8 flex items-center justify-center" onclick="decrementCounter(${product.id})">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                            </svg>
                        </button>
                        <button class="plus-icon-small w-8 h-8 flex items-center justify-center" onclick="incrementCounter(${product.id})">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </button>
                    </div>
                </div>
            `;
        }

        // Function to render products based on category
        function renderProducts(category = 'all') {
            const productGrid = document.getElementById('productGrid');
            const filteredProducts = category === 'all' ?
                coffeeProducts :
                coffeeProducts.filter(product => product.category === category);

            productGrid.innerHTML = filteredProducts.map(createProductCard).join('');

            // Update counters and size selections for existing items
            Object.keys(counterValues).forEach(productId => {
                updateCounter(parseInt(productId));
            });
            Object.keys(sizeSelections).forEach(productId => {
                updateSizeButton(parseInt(productId));
            });

            // Update category title
            const categoryTitle = document.getElementById('categoryTitle');
            categoryTitle.textContent = category === 'all' ? 'All Items' :
                `${category.charAt(0).toUpperCase() + category.slice(1)} Menu`;
        }

        // Function to add to cart
        function addToCart(productId) {
            incrementCounter(productId);
        }

        // Function to increment counter
        function incrementCounter(productId) {
            counterValues[productId] = (counterValues[productId] || 0) + 1;
            updateCounter(productId);
            checkAndShowFloatingButton();
        }

        // Function to decrement counters
        function decrementCounter(productId) {
            if (counterValues[productId] > 1) {
                counterValues[productId]--;
            } else {
                delete counterValues[productId];
            }
            updateCounter(productId);
            checkAndShowFloatingButton();
        }

        function checkAndShowFloatingButton() {
            const hasItems = Object.keys(counterValues).length > 0;
            if (hasItems) {
                showFloatingCartButton();
            } else {
                hideFloatingCartButton();
            }
        }

        // Function to update counter display
        function updateCounter(productId) {
            const button = document.getElementById(`cart-btn-${productId}`);
            const counter = button.querySelector('.counter');
            const count = counterValues[productId] || 0;

            counter.textContent = count;

            if (count > 0) {
                button.classList.add('expanded');
            } else {
                button.classList.remove('expanded');
            }
        }

        // Function to open size selection popup
        function openSizePopup(productId) {
            const popup = document.getElementById('sizePopup');
            popup.classList.add('active');
            popup.dataset.productId = productId;
        }

        // Function to close size selection popup
        function closeSizePopup() {
            const popup = document.getElementById('sizePopup');
            popup.classList.remove('active');
        }

        // Function to select size
        function selectSize(size) {
            const popup = document.getElementById('sizePopup');
            const productId = parseInt(popup.dataset.productId);
            sizeSelections[productId] = size;
            updateSizeButton(productId);
            closeSizePopup();
        }

        // Function to update size button
        function updateSizeButton(productId) {
            const sizeButton = document.getElementById(`size-btn-${productId}`);
            sizeButton.textContent = sizeSelections[productId];
        }

        // Function to handle category selection
        function selectCategory(category) {
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to selected nav item
            const selectedItem = document.querySelector(`[data-category="${category}"]`);
            if (selectedItem) {
                selectedItem.classList.add('active');
            }

            // Get the main content container
            const mainContent = document.querySelector('main');
            mainContent.style.opacity = '0';
            mainContent.style.transform = 'translateY(10px)';

            // Wait for fade out, then update content
            setTimeout(() => {
                mainContent.className = 'container mx-auto px-4 py-8 page-transition';

                // Handle page content based on category
                if (category === 'all') {
                    mainContent.innerHTML = `
                <h2 id="categoryTitle" class="text-2xl font-semibold mb-6 text-gray-800">All Items</h2>
                <div id="productGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6"></div>
            `;
                    renderProducts('all');
                } else if (category === 'cart') {
                    renderCartPage();
                } else if (category === 'clipboard') {
                    renderClipboardPage();
                } else if (category === 'user') {
                    renderUserPage();
                } else if (category === 'options') {
                    renderOptionsPage();
                } else {
                    renderProducts(category);
                }

                // Fade in the new content
                mainContent.style.opacity = '1';
                mainContent.style.transform = 'translateY(0)';
            }, 300);
        }


        // Calculate order total
        function calculateOrderTotal() {
            let subtotal = 0;
            Object.keys(counterValues).forEach(productId => {
                const product = coffeeProducts.find(p => p.id === parseInt(productId));
                subtotal += product.price * counterValues[productId];
            });

            const vat = subtotal * 0.075;
            const deliveryCharge = 60;
            const discount = 45; // This could be made dynamic based on coupon logic

            return {
                subtotal: subtotal,
                vat: Math.round(vat),
                discount: discount,
                deliveryCharge: deliveryCharge,
                total: Math.round(subtotal + vat - discount + deliveryCharge)
            };
        }



        // Update progress bar
        function updateProgressBar(completion) {
            const progressBar = document.querySelector('.bg-black');
            const progressText = document.querySelector('.text-gray-500');
            if (progressBar && progressText) {
                progressBar.style.width = `${completion}%`;
                progressText.textContent = `Profile ${completion}% completed`;
            }
        }

        // Function to apply coupon
        function applyCoupon(couponCode) {
            // This could be expanded to handle different coupon codes
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg';
            notification.textContent = 'Invalid coupon code';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Function to handle order placement
        function placeOrder() {
            // Check if cart is empty
            if (Object.keys(counterValues).length === 0) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Your cart is empty!';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
                return;
            }

            const userProfile = initializeUserProfile();
            if (!userProfile.addresses.home) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Please add a delivery address before placing order';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
                return;
            }

            const totals = calculateOrderTotal();
            const orderNumber = generateOrderNumber();
            const orderDate = new Date().toISOString();

            // Create new order
            const newOrder = {
                orderNumber: orderNumber,
                date: orderDate,
                status: 'Processing',
                items: Object.keys(counterValues).map(productId => ({
                    product: coffeeProducts.find(p => p.id === parseInt(productId)),
                    quantity: counterValues[productId],
                    size: sizeSelections[productId] || 'L'
                })),
                address: userProfile.addresses.home,
                phone: userProfile.mobile,
                totals: totals
            };

            // Get existing orders
            const orders = initializeOrders();

            // If there's a current order, move it to previous orders
            if (orders.current) {
                orders.previous.unshift(orders.current);
            }

            // Set new order as current
            orders.current = newOrder;

            // Save to localStorage
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart by resetting the objects
            counterValues = {};
            sizeSelections = {};

            // Show success message
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            notification.textContent = 'Order placed successfully!';
            document.body.appendChild(notification);

            // Redirect to clipboard page after a short delay
            setTimeout(() => {
                notification.remove();
                selectCategory('clipboard');
            }, 2000);
        }


        // Add hover effect to nav items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('mouseenter', () => {
                if (!item.classList.contains('active')) {
                    item.style.transform = 'translateY(-2px)';
                }
            });

            item.addEventListener('mouseleave', () => {
                if (!item.classList.contains('active')) {
                    item.style.transform = 'translateY(0)';
                }
            });
        });

        // Add this function to handle smooth scrolling to top when switching pages
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Add event listeners to navbar items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function (event) {
                event.preventDefault();
                const category = this.dataset.category;
                selectCategory(category);
                scrollToTop();
            });
        });

        // Add event listeners to size options
        document.querySelectorAll('.size-option').forEach(option => {
            option.addEventListener('click', (event) => {
                const size = event.currentTarget.dataset.size;
                selectSize(size);
            });
        });

        // Function to render clipboard page
        // Function to render clipboard page
        function renderClipboardPage() {
            const orders = initializeOrders();
            const mainContent = document.querySelector('main');

            mainContent.innerHTML = `
        <div class="container mx-auto px-4 max-w-lg">
            ${orders.current ? `
                <!-- Current Order Section -->
                <h2 class="text-xl font-semibold mb-4">Current Order</h2>
                <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                    <div class="space-y-3">
                        <p class="font-medium">Order number: ${orders.current.orderNumber}</p>
                        <p class="text-gray-600">${orders.current.status}</p>
                        
                        <!-- Status Steps -->
                        <div class="space-y-2 my-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 ${orders.current.status === 'Processing' ? 'bg-black' : 'bg-gray-300'} rounded-full"></div>
                                <span class="${orders.current.status === 'Processing' ? 'text-black' : 'text-gray-600'}">Processing</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 ${orders.current.status === 'On the way' ? 'bg-black' : 'border-2 border-gray-300'} rounded-full"></div>
                                <span class="${orders.current.status === 'On the way' ? 'text-black' : 'text-gray-600'}">On the way</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 ${orders.current.status === 'Delivered' ? 'bg-black' : 'border-2 border-gray-300'} rounded-full"></div>
                                <span class="${orders.current.status === 'Delivered' ? 'text-black' : 'text-gray-600'}">Delivered</span>
                            </div>
                        </div>

                        <p class="font-medium">Total due: ${orders.current.totals.total} Taka</p>
                        <p class="text-gray-600">Phone: ${orders.current.phone}</p>
                        
                        <!-- Action Buttons -->
                        <div class="flex space-x-4 mt-4">
                            <button onclick="cancelOrder()" class="flex-1 py-2 px-4 border border-black rounded-full hover:bg-gray-100 transition-colors">
                                Cancel
                            </button>
                            <button class="flex-1 py-2 px-4 bg-black text-white rounded-full hover:bg-gray-800 transition-colors">
                                Invoice
                            </button>
                        </div>
                    </div>
                </div>
            ` : ''}

            <!-- Previous Orders Section -->
            <h2 class="text-xl font-semibold mb-4">Previous Orders</h2>
            <div class="space-y-4">
                ${orders.previous.map(order => `
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <div class="space-y-2">
                            <p class="font-medium">Order number: ${order.orderNumber}</p>
                            <p class="text-gray-600">Status: ${order.status}</p>
                            <p class="font-medium">Total bill: ${order.totals.total} Taka</p>
                            
                            <!-- Action Buttons -->
                            <div class="flex space-x-4 mt-4">
                                <button onclick="orderAgain(${order.orderNumber})" class="flex-1 py-2 px-4 border border-black rounded-full hover:bg-gray-100 transition-colors">
                                    Order Again
                                </button>
                                <button class="flex-1 py-2 px-4 bg-black text-white rounded-full hover:bg-gray-800 transition-colors">
                                    Receipt
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
        }

        // Function to calculate order total
        function calculateOrderTotal() {
            const subtotal = window.cartStorage.reduce((total, item) => {
                const product = coffeeProducts.find(p => p.id === item.productId);
                return total + (product.price * item.count);
            }, 0);

            const vat = Math.round(subtotal * 0.075);
            const discount = 45;
            const deliveryCharge = 60;

            return {
                subtotal,
                vat,
                discount,
                deliveryCharge,
                total: subtotal + vat - discount + deliveryCharge
            };
        }

        // Optional: Function to order again
        function orderAgain(orderNumber) {
            const orders = initializeOrders();
            const order = orders.previous.find(o => o.orderNumber === orderNumber);

            if (order) {
                // Reset cart
                counterValues = {};
                sizeSelections = {};

                // Add items back to cart
                order.items.forEach(item => {
                    counterValues[item.product.id] = item.quantity;
                    sizeSelections[item.product.id] = item.size;
                });

                // Navigate to cart
                selectCategory('cart');
            }
        }


        // Add click handlers for the buttons
        document.addEventListener('click', function (e) {
            if (e.target.matches('.order-again-btn')) {
                // Handle Order Again click
                console.log('Order Again clicked');
            } else if (e.target.matches('.receipt-btn')) {
                // Handle Receipt click
                console.log('Receipt clicked');
            } else if (e.target.matches('.cancel-btn')) {
                // Handle Cancel click
                console.log('Cancel clicked');
            } else if (e.target.matches('.invoice-btn')) {
                // Handle Invoice click
                console.log('Invoice clicked');
            }
        });


        // Function to render user profile page

        // Initialize user profile in local storage if it doesn't exist
        function initializeUserProfile() {
            if (!localStorage.getItem('userProfile')) {
                const defaultProfile = {
                    name: 'Saad Rahman',
                    mobile: '01677552128',
                    email: '',
                    dateOfBirth: '',
                    gender: '',
                    addresses: {
                        home: 'Apartment A/9, Teachers\' quarter, Dhaka commerce college, Mirpur, Dhaka 1216.',
                        work: '',
                        other: ''
                    }
                };
                localStorage.setItem('userProfile', JSON.stringify(defaultProfile));
            }
            return JSON.parse(localStorage.getItem('userProfile'));
        }

        // Function to calculate profile completion percentage
        function calculateProfileCompletion(userProfile) {
            // Define required fields and their weights
            const fields = {
                mobile: userProfile.mobile,
                email: userProfile.email,
                dateOfBirth: userProfile.dateOfBirth,
                gender: userProfile.gender,
                homeAddress: userProfile.addresses.home,
                workAddress: userProfile.addresses.work,
                otherAddress: userProfile.addresses.other
            };

            // Count filled fields
            let filledFields = 0;
            const totalFields = Object.keys(fields).length;

            for (const [key, value] of Object.entries(fields)) {
                if (value && value.trim() !== '') {
                    filledFields++;
                }
            }

            return Math.round((filledFields / totalFields) * 100);
        }

        // Function to render user profile page
        function renderUserPage(highlightAddress = '') {
            const userProfile = initializeUserProfile();
            const completion = calculateProfileCompletion(userProfile);
            const mainContent = document.querySelector('main');

            mainContent.innerHTML = `
        <div class="container mx-auto px-4 max-w-lg">
            <!-- Profile Section -->
            <div class="flex flex-col items-center mb-8">
                <div class="w-32 h-32 rounded-full overflow-hidden mb-4">
                    <img src="https://scontent-ord5-1.xx.fbcdn.net/v/t39.30808-6/369683372_10223279696361413_5507658032399956143_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=a5f93a&_nc_ohc=Ds7qR0HwIVsQ7kNvgGmUyqg&_nc_ht=scontent-ord5-1.xx&_nc_gid=A5dk0SoWLRww1_dqRFc2NE8&oh=00_AYDyVSB182nxcXnBfad1qjUKIRyP-NwV85nIn0QGbXl5cw&oe=6722E48F" alt="Profile Picture" class="w-full h-full object-cover">
                </div>
                <h2 class="text-xl font-semibold mb-2">${userProfile.name}</h2>
                
                <!-- Progress Bar -->
                <div class="w-full max-w-xs mb-1">
                    <div class="w-full h-1.5 bg-gray-200 rounded-full">
                        <div class="h-full bg-black rounded-full transition-all duration-300" style="width: ${completion}%"></div>
                    </div>
                </div>
                <p class="text-gray-500 text-sm">Profile ${completion}% completed</p>
            </div>

            <!-- Profile Form -->
            <form id="profileForm" class="space-y-6">
                <div class="space-y-2">
                    <label class="block text-gray-700">Mobile Number</label>
                    <input type="tel" name="mobile" value="${userProfile.mobile}" 
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:border-black"
                        placeholder="Enter mobile number">
                </div>

                <div class="space-y-2">
                    <label class="block text-gray-700">Email</label>
                    <input type="email" name="email" value="${userProfile.email}"
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:border-black"
                        placeholder="Enter email">
                </div>

                <div class="space-y-2">
                    <label class="block text-gray-700">Date of Birth</label>
                    <input type="date" name="dateOfBirth" value="${userProfile.dateOfBirth}"
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:border-black">
                </div>

                <div class="space-y-2">
                    <label class="block text-gray-700">Gender</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="gender" value="male" ${userProfile.gender === 'male' ? 'checked' : ''} class="mr-2">
                            <span>Male</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="gender" value="female" ${userProfile.gender === 'female' ? 'checked' : ''} class="mr-2">
                            <span>Female</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="gender" value="other" ${userProfile.gender === 'other' ? 'checked' : ''} class="mr-2">
                            <span>Other</span>
                        </label>
                    </div>
                </div>

                <!-- Address sections with highlighting -->
                <div class="space-y-2 ${highlightAddress === 'home' ? 'bg-yellow-50 p-4 rounded-lg' : ''}">
                    <label class="block text-gray-700">Address (Home)</label>
                    <input type="text" name="homeAddress" value="${userProfile.addresses.home}"
                        class="w-full px-4 py-2 rounded-lg border ${highlightAddress === 'home' ? 'border-yellow-400' : 'border-gray-300'} focus:outline-none focus:border-black"
                        placeholder="Enter home address">
                </div>

                <div class="space-y-2 ${highlightAddress === 'work' ? 'bg-yellow-50 p-4 rounded-lg' : ''}">
                    <label class="block text-gray-700">Address (Work)</label>
                    <input type="text" name="workAddress" value="${userProfile.addresses.work}"
                        class="w-full px-4 py-2 rounded-lg border ${highlightAddress === 'work' ? 'border-yellow-400' : 'border-gray-300'} focus:outline-none focus:border-black"
                        placeholder="Enter work address">
                </div>

                <div class="space-y-2 ${highlightAddress === 'other' ? 'bg-yellow-50 p-4 rounded-lg' : ''}">
                    <label class="block text-gray-700">Address (Other)</label>
                    <input type="text" name="otherAddress" value="${userProfile.addresses.other}"
                        class="w-full px-4 py-2 rounded-lg border ${highlightAddress === 'other' ? 'border-yellow-400' : 'border-gray-300'} focus:outline-none focus:border-black"
                        placeholder="Enter other address">
                </div>

                <button type="submit" class="w-full bg-black text-white py-3 rounded-full hover:bg-gray-800 transition-colors">
                    Save Changes
                </button>

                <!-- Add some padding at the bottom for the floating navbar -->
                <div class="h-24"></div>
            </form>
        </div>
    `;

            // Add form submission handler
            const form = document.getElementById('profileForm');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const userProfile = initializeUserProfile();

                // Update the profile with form data
                userProfile.mobile = formData.get('mobile');
                userProfile.email = formData.get('email');
                userProfile.dateOfBirth = formData.get('dateOfBirth');
                userProfile.gender = formData.get('gender');
                userProfile.addresses = {
                    home: formData.get('homeAddress'),
                    work: formData.get('workAddress'),
                    other: formData.get('otherAddress')
                };

                // Save to localStorage
                localStorage.setItem('userProfile', JSON.stringify(userProfile));

                // Update progress bar immediately after save
                const newCompletion = calculateProfileCompletion(userProfile);
                const progressBar = document.querySelector('.bg-black');
                const progressText = document.querySelector('.text-gray-500');

                if (progressBar && progressText) {
                    progressBar.style.width = `${newCompletion}%`;
                    progressText.textContent = `Profile ${newCompletion}% completed`;
                }

                // Show success message
                const notification = document.createElement('div');
                notification.className =
                    'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Profile updated successfully!';
                document.body.appendChild(notification);

                // Remove notification after 3 seconds
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            });

            // Add input event listeners to update progress in real-time
            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    const formData = new FormData(form);
                    const tempProfile = {
                        ...userProfile,
                        mobile: formData.get('mobile'),
                        email: formData.get('email'),
                        dateOfBirth: formData.get('dateOfBirth'),
                        gender: formData.get('gender'),
                        addresses: {
                            home: formData.get('homeAddress'),
                            work: formData.get('workAddress'),
                            other: formData.get('otherAddress')
                        }
                    };

                    const newCompletion = calculateProfileCompletion(tempProfile);
                    const progressBar = document.querySelector('.bg-black');
                    const progressText = document.querySelector('.text-gray-500');

                    if (progressBar && progressText) {
                        progressBar.style.width = `${newCompletion}%`;
                        progressText.textContent = `Profile ${newCompletion}% completed`;
                    }
                });
            });
        }


        // Initialize orders in localStorage if they don't exist
        function initializeOrders() {
            if (!localStorage.getItem('orders')) {
                localStorage.setItem('orders', JSON.stringify({
                    current: null,
                    previous: []
                }));
            }
            return JSON.parse(localStorage.getItem('orders'));
        }

        // Function to generate order number
        function generateOrderNumber() {
            return Math.floor(100000000 + Math.random() * 900000000);
        }

        // Function to place order
        function placeOrder() {
            const userProfile = initializeUserProfile();
            if (!userProfile.addresses.home) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Please add a delivery address before placing order';
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
                return;
            }

            const totals = calculateOrderTotal();
            const orderNumber = generateOrderNumber();
            const orderDate = new Date().toISOString();

            // Create new order
            const newOrder = {
                orderNumber: orderNumber,
                date: orderDate,
                status: 'Processing', // Initial status
                items: Object.keys(counterValues).map(productId => ({
                    product: coffeeProducts.find(p => p.id === parseInt(productId)),
                    quantity: counterValues[productId],
                    size: sizeSelections[productId] || 'L'
                })),
                address: userProfile.addresses.home,
                phone: userProfile.mobile,
                totals: totals
            };

            // Get existing orders
            const orders = initializeOrders();

            // If there's a current order, move it to previous orders
            if (orders.current) {
                orders.previous.unshift(orders.current);
            }

            // Set new order as current
            orders.current = newOrder;

            // Save to localStorage
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart
            counterValues = {};
            sizeSelections = {};

            // Show success message
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            notification.textContent = 'Order placed successfully!';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
                // Redirect to clipboard page to see order status
                selectCategory('clipboard');
            }, 2000);
        }

        // Function to cancel order
        function cancelOrder() {
            const orders = initializeOrders();
            if (orders.current) {
                // Move current order to previous orders with cancelled status
                orders.current.status = 'Cancelled';
                orders.previous.unshift(orders.current);
                orders.current = null;

                // Save to localStorage
                localStorage.setItem('orders', JSON.stringify(orders));

                // Show cancellation message
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Order cancelled successfully';
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                    // Refresh clipboard page
                    renderClipboardPage();
                }, 2000);
            }
        }

        function renderCartPage() {
            const mainContent = document.querySelector('main');
            mainContent.innerHTML = `
        <div class="container mx-auto px-4 max-w-lg">
            <!-- Cart Items -->
            <div class="space-y-4 mb-6">
                ${window.cartStorage.map(item => {
                    const product = coffeeProducts.find(p => p.id === item.productId);
                    return `
                        <div class="bg-white rounded-lg p-4 flex items-center space-x-4">
                            <img src="${product.image}" alt="${product.name}" class="w-24 h-24 object-cover rounded-lg">
                            <div class="flex-1">
                                <h3 class="font-semibold text-lg">${product.name}</h3>
                                <div class="flex items-center space-x-2 my-2">
                                    <span class="inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-200 text-sm">
                                        ${item.size}
                                    </span>
                                    <span class="text-gray-600">350 ml</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <button class="text-red-500 border border-red-500 rounded-full px-4 py-1 remove-btn" 
                                            data-product-id="${item.productId}" 
                                            data-size="${item.size}">
                                        Remove
                                    </button>
                                    <span class="w-8 text-center">${item.count}</span>
                                    <span class="font-medium">${product.price * item.count} Taka</span>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('')}
            </div>

            <!-- Address Section -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-2">
                    <h2 class="font-semibold">Address:</h2>
                    <button onclick="editAddress()">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                        </svg>
                    </button>
                </div>
                <p class="text-gray-600">${initializeUserProfile().addresses.home || 'No address set'}</p>
            </div>

            <!-- Coupon Section -->
            <div class="mb-6">
                <p class="mb-2">Do you have a coupon?</p>
                <div class="flex space-x-4">
                    <input type="text" placeholder="Coupon" 
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-black">
                    <button class="px-6 py-2 border border-gray-300 rounded-full hover:bg-gray-50 apply-coupon">
                        Apply
                    </button>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="space-y-2 mb-6">
                ${calculateOrderSummaryHTML()}
            </div>

            <!-- Place Order Button -->
            <button class="w-full bg-black text-white py-3 rounded-full hover:bg-gray-800 transition-colors mb-24 place-order-btn">
                Place Order
            </button>
        </div>
    `;

            attachCartEventListeners();
        }


        function attachCartEventListeners() {
            // Remove button handlers
            document.querySelectorAll('.remove-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.dataset.productId);
                    const size = e.target.dataset.size;

                    window.cartStorage = window.cartStorage.filter(item =>
                        !(item.productId === productId && item.size === size)
                    );

                    renderCartPage();
                });
            });

            // Coupon button handler
            const applyButton = document.querySelector('.apply-coupon');
            if (applyButton) {
                applyButton.addEventListener('click', () => {
                    const couponInput = document.querySelector('input[placeholder="Coupon"]');
                    applyCoupon(couponInput.value);
                });
            }

            // Place order button handler
            const placeOrderButton = document.querySelector('.place-order-btn');
            if (placeOrderButton) {
                placeOrderButton.addEventListener('click', placeOrder);
            }
        }


        // Add this new function for calculating order summary
        function calculateOrderSummaryHTML() {
            const totals = calculateOrderTotal();
            return `
        <div class="flex justify-between">
            <span class="text-gray-600">Sub total</span>
            <span class="font-medium">${totals.subtotal} Taka</span>
        </div>
        <div class="flex justify-between">
            <span class="text-gray-600">VAT (7.5%)</span>
            <span class="font-medium">${totals.vat} Taka</span>
        </div>
        <div class="flex justify-between">
            <span class="text-gray-600">Discount</span>
            <span class="font-medium">${totals.discount} Taka</span>
        </div>
        <div class="flex justify-between">
            <span class="text-gray-600">Delivery Charge</span>
            <span class="font-medium">${totals.deliveryCharge} Taka</span>
        </div>
        <div class="flex justify-between pt-2 border-t">
            <span class="font-semibold">Total</span>
            <span class="font-semibold">${totals.total} Taka</span>
        </div>
    `;
        }

        // Function to place order
        function placeOrder() {
            // Check if cart is empty
            if (Object.keys(counterValues).length === 0) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Your cart is empty!';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
                return;
            }

            const userProfile = initializeUserProfile();
            if (!userProfile.addresses.home) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                notification.textContent = 'Please add a delivery address before placing order';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
                return;
            }

            const totals = calculateOrderTotal();
            const orderNumber = generateOrderNumber();
            const orderDate = new Date().toISOString();

            // Create new order
            const newOrder = {
                orderNumber: orderNumber,
                date: orderDate,
                status: 'Processing',
                items: Object.keys(counterValues).map(productId => ({
                    product: coffeeProducts.find(p => p.id === parseInt(productId)),
                    quantity: counterValues[productId],
                    size: sizeSelections[productId] || 'L'
                })),
                address: userProfile.addresses.home,
                phone: userProfile.mobile,
                totals: totals
            };

            // Get existing orders
            const orders = initializeOrders();

            // If there's a current order, move it to previous orders
            if (orders.current) {
                orders.previous.unshift(orders.current);
            }

            // Set new order as current
            orders.current = newOrder;

            // Save to localStorage
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart
            counterValues = {};
            sizeSelections = {};

            // Show success message
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            notification.textContent = 'Order placed successfully!';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
                selectCategory('clipboard');
            }, 2000);
        }


        // Add these new functions
        function createFloatingCartButton() {
            const existingButton = document.getElementById('floatingCartButton');
            if (existingButton) {
                existingButton.remove();
            }

            const button = document.createElement('div');
            button.innerHTML = `
        <button id="floatingCartButton" class="floating-cart-button">
            Add to Cart
        </button>
    `;
            document.body.appendChild(button.firstElementChild);

            document.getElementById('floatingCartButton').addEventListener('click', handleAddToCart);
        }

        function showFloatingCartButton() {
            const button = document.getElementById('floatingCartButton');
            if (button) {
                button.classList.add('visible');
            } else {
                createFloatingCartButton();
                setTimeout(() => {
                    document.getElementById('floatingCartButton').classList.add('visible');
                }, 100);
            }
        }

        function hideFloatingCartButton() {
            const button = document.getElementById('floatingCartButton');
            if (button) {
                button.classList.remove('visible');
            }
        }

        function handleAddToCart() {
            const currentSelections = {
                items: {
                    ...counterValues
                },
                sizes: {
                    ...sizeSelections
                }
            };

            // Process each selected item
            Object.entries(currentSelections.items).forEach(([productId, count]) => {
                const size = currentSelections.sizes[productId] || 'L';
                const existingItem = window.cartStorage.find(item =>
                    item.productId === parseInt(productId) && item.size === size
                );

                if (existingItem) {
                    // Update quantity if same item and size exists
                    existingItem.count += count;
                } else {
                    // Add as new item
                    window.cartStorage.push({
                        productId: parseInt(productId),
                        count: count,
                        size: size
                    });
                }
            });

            // Clear current selections
            Object.keys(counterValues).forEach(key => delete counterValues[key]);
            Object.keys(sizeSelections).forEach(key => delete sizeSelections[key]);

            // Update UI
            renderProducts('all');
            hideFloatingCartButton();

            // Show success notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            notification.textContent = 'Items added to cart!';
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }


        // Function to generate order number
        function generateOrderNumber() {
            return Math.floor(100000000 + Math.random() * 900000000);
        }


        // Function to handle address editing
        function editAddress() {
            selectCategory('user');
            setTimeout(() => renderUserPage('home'), 300);
        }

        // Function to remove item from cart
        function removeItem(productId) {
            delete counterValues[productId];
            delete sizeSelections[productId];
            renderCartPage();
        }


        // Update window.onload to initialize orders and show them
        window.onload = function () {
            // Initialize cart storage if it doesn't exist
            if (!window.cartStorage) {
                window.cartStorage = [];
            }

            // Create floating cart button
            createFloatingCartButton();

            // Initialize orders with demo data if needed
            if (!localStorage.getItem('orders')) {
                // Your existing demo orders initialization code
            }

            // Initial render
            renderProducts('all');

            // Add click handlers for size options
            document.querySelectorAll('.size-option').forEach(option => {
                option.addEventListener('click', (event) => {
                    const size = event.currentTarget.dataset.size;
                    selectSize(size);
                });
            });

            // Initialize navigation event listeners
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function (event) {
                    event.preventDefault();
                    const category = this.dataset.category;
                    selectCategory(category);
                    scrollToTop();
                });
            });
        };


        // Optional: Add a helper function to clear cart (can be used elsewhere if needed)
        function clearCart() {
            counterValues = {};
            sizeSelections = {};
        }
    </script>

</body>

</html>
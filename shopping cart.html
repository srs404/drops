<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drops Coffee App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
        }

        .content-wrapper {
            min-height: 100vh;
            padding-bottom: 100px;
        }

        .floating-navbar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 40px);
            max-width: 500px;
            border-radius: 20px;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .floating-navbar svg {
            width: 24px;
            height: 24px;
        }

        .nav-item {
            position: relative;
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background-color: white;
            border-radius: 3px;
        }

        .cart-button,
        .size-button {
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 8px;
        }

        .cart-button {
            right: 8px;
        }

        .size-button {
            left: 8px;
        }

        .cart-button.expanded {
            width: 96px;
        }

        .cart-button svg {
            transition: all 0.3s ease;
        }

        .cart-button.expanded .plus-icon {
            display: none;
        }

        .cart-button .counter {
            display: none;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .cart-button.expanded .counter {
            display: inline;
        }

        .cart-button .minus-icon,
        .cart-button .plus-icon-small {
            display: none;
        }

        .cart-button.expanded .minus-icon,
        .cart-button.expanded .plus-icon-small {
            display: flex;
        }

        .cart-button.expanded .minus-icon {
            position: absolute;
            left: 8px;
        }

        .cart-button.expanded .plus-icon-small {
            position: absolute;
            right: 8px;
        }

        .size-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .size-popup.active {
            display: flex;
        }

        .size-popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .size-option {
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px) saturate(80%);
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .size-option:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* New styles for shopping cart */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .cart-item-info {
            flex-grow: 1;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin-right: 1rem;
        }

        .cart-item-quantity button {
            background-color: #e2e8f0;
            border: none;
            padding: 0.25rem 0.5rem;
            font-size: 1rem;
            cursor: pointer;
        }

        .cart-item-quantity span {
            padding: 0 0.5rem;
        }

        .remove-item {
            color: #e53e3e;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .floating-navbar {
                bottom: 30px;
                max-width: 600px;
            }
        }
    </style>
</head>

<body class="bg-gray-100">
    <div class="content-wrapper">
        <!-- Header -->
        <header class="bg-white shadow-md">
            <div class="container mx-auto px-4 py-6 flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-800">drops</h1>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-600 hover:text-gray-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <h2 id="categoryTitle" class="text-2xl font-semibold mb-6 text-gray-800">All Items</h2>
            <div id="productGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Products will be dynamically inserted here -->
            </div>
        </main>
    </div>

    <!-- Floating Footer Navigation -->
    <footer class="floating-navbar">
        <nav class="flex justify-around items-center py-4">
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="clipboard">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                    <path fill-rule="evenodd"
                        d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z"
                        clip-rule="evenodd" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="user">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                        clip-rule="evenodd" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors active" data-category="all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="cart">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
                </svg>
            </button>
            <button class="nav-item text-white hover:text-gray-300 transition-colors" data-category="options">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                        clip-rule="evenodd" />
                </svg>
            </button>
        </nav>
    </footer>

    <!-- Size Selection Popup -->
    <div id="sizePopup" class="size-popup">
        <div class="size-popup-content">
            <h3 class="text-xl font-semibold mb-4">Select Size</h3>
            <button class="size-option" data-size="S">Small</button>
            <button class="size-option" data-size="M">Medium</button>
            <button class="size-option" data-size="L">Large</button>
        </div>
    </div>

    <!-- Shopping Cart Template (hidden by default) -->
    <template id="shoppingCartTemplate">
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-semibold mb-4">Your Cart</h3>
            <div id="cartItems">
                <!-- Cart items will be dynamically inserted here -->
            </div>
            <div class="mt-6">
                <div class="flex justify-between items-center mb-2">
                    <span>Do you have a coupon?</span>
                    <input type="text" placeholder="Enter coupon code" class="border rounded px-2 py-1">
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span>Subtotal:</span>
                    <span id="subtotal"></span>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span>VAT (7.5%):</span>
                    <span id="vat"></span>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span>Discount:</span>
                    <span id="discount">0 Taka</span>
                </div>
                <div class="flex justify-between items-center mb-4 font-semibold">
                    <span>Total:</span>
                    <span id="total"></span>
                </div>
                <button onclick="placeOrder()"
                    class="w-full bg-black bg-opacity-60 text-white py-2 rounded-lg hover:bg-opacity-70 transition-colors">
                    Place Order
                </button>
            </div>
        </div>
    </template>

    <script>
        // JSON data for coffee products
        const coffeeProducts = [{
                id: 1,
                name: "Caramel Macchiato",
                price: 150,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 2,
                name: "Latte",
                price: 140,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 3,
                name: "Cappuccino",
                price: 130,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 4,
                name: "Iced Americano",
                price: 120,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "cold"
            },
            {
                id: 5,
                name: "Espresso",
                price: 110,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "hot"
            },
            {
                id: 6,
                name: "Iced Mocha",
                price: 160,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "cold"
            },
            {
                id: 7,
                name: "Croissant",
                price: 80,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "food"
            },
            {
                id: 8,
                name: "Cheesecake",
                price: 135,
                image: "https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-the-strawberry-milkshake-png-image_11654489.png",
                category: "dessert"
            }
        ];

        // Object to store counter values
        const counterValues = {};

        // Object to store size selections
        const sizeSelections = {};

        // Function to create a product card
        function createProductCard(product) {
            const count = counterValues[product.id] || 0;
            const isExpanded = count > 0;
            const size = sizeSelections[product.id] || 'S';
            return `
                <div class="bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 relative pb-16">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">${product.name}</h3>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600 font-medium">${product.price} Taka</span>
                        </div>
                    </div>
                    <button id="size-btn-${product.id}" class="size-button text-white w-8 h-8 rounded-full" onclick="openSizePopup(${product.id})">
                        ${size}
                    </button>
                    <div id="cart-btn-${product.id}" class="cart-button text-white w-8 h-8 rounded-full ${isExpanded ? 'expanded' : ''}">
                        <button class="plus-icon w-full h-full flex items-center justify-center" onclick="addToCart(${product.id})">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </button>
                        <span class="counter">${count}</span>
                        <button class="minus-icon w-8 h-8 flex items-center justify-center" onclick="decrementCounter(${product.id})">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                            </svg>
                        </button>
                        <button class="plus-icon-small w-8 h-8 flex items-center justify-center" onclick="incrementCounter(${product.id})">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </button>
                    </div>
                </div>
            `;
        }

        // Function to render products based on category
        function renderProducts(category = 'all') {
            const productGrid = document.getElementById('productGrid');
            let filteredProducts;
            let categoryTitle;

            switch (category) {
                case 'clipboard':
                    categoryTitle = 'Orders';
                    productGrid.innerHTML =
                        `<p class="text-center w-full">Your order history will be displayed here.</p>`;
                    return;
                case 'user':
                    categoryTitle = 'User Profile';
                    productGrid.innerHTML =
                        `<p class="text-center w-full">Your user profile information will be displayed here.</p>`;
                    return;
                case 'cart':
                    categoryTitle = 'Shopping Cart';
                    renderShoppingCart();
                    return;
                case 'options':
                    categoryTitle = 'Options';
                    productGrid.innerHTML =
                        `<p class="text-center w-full">App options and settings will be displayed here.</p>`;
                    return;
                default:
                    categoryTitle = 'All Items';
                    filteredProducts = coffeeProducts;
            }

            productGrid.innerHTML = filteredProducts.map(createProductCard).join('');

            // Update category title
            const categoryTitleElement = document.getElementById('categoryTitle');
            categoryTitleElement.textContent = categoryTitle;
        }

        // Function to render shopping cart
        function renderShoppingCart() {
            const productGrid = document.getElementById('productGrid');
            const cartTemplate = document.getElementById('shoppingCartTemplate');
            const cartContent = cartTemplate.content.cloneNode(true);

            const cartItemsContainer = cartContent.getElementById('cartItems');
            const cartItems = coffeeProducts.filter(product => counterValues[product.id] > 0);

            cartItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-info">
                        <h4 class="font-medium">${item.name}</h4>
                        <p class="text-sm text-gray-500">Size: ${sizeSelections[item.id] || 'S'}</p>
                    </div>
                    <div class="cart-item-actions">
                        <div class="cart-item-quantity">
                            <button onclick="decrementCounter(${item.id})">-</button>
                            <span>${counterValues[item.id]}</span>
                            <button onclick="incrementCounter(${item.id})">+</button>
                        </div>
                        <span class="remove-item" onclick="removeFromCart(${item.id})">Remove</span>
                    </div>
                `;
                cartItemsContainer.appendChild(itemElement);
            });

            updateCartTotals(cartContent);

            productGrid.innerHTML = '';
            productGrid.appendChild(cartContent);
        }

        // Function to update cart totals
        function updateCartTotals(cartElement) {
            const subtotal = calculateSubtotal();
            const vat = calculateVAT(subtotal);
            const total = subtotal + vat;

            cartElement.getElementById('subtotal').textContent = `${subtotal} Taka`;
            cartElement.getElementById('vat').textContent = `${vat} Taka`;
            cartElement.getElementById('total').textContent = `${total} Taka`;
        }

        // Function to add to cart
        function addToCart(productId) {
            incrementCounter(productId);
        }

        // Function to increment counter
        function incrementCounter(productId) {
            counterValues[productId] = (counterValues[productId] || 0) + 1;
            updateCounter(productId);
        }

        // Function to decrement counter
        function decrementCounter(productId) {
            if (counterValues[productId] > 1) {
                counterValues[productId]--;
            } else {
                delete counterValues[productId];
            }
            updateCounter(productId);
        }

        // Function to remove item from cart
        function removeFromCart(productId) {
            delete counterValues[productId];
            updateCounter(productId);
            if (document.querySelector('.nav-item[data-category="cart"]').classList.contains('active')) {
                renderShoppingCart();
            }
        }

        // Function to update counter display
        function updateCounter(productId) {
            const button = document.getElementById(`cart-btn-${productId}`);
            if (button) {
                const counter = button.querySelector('.counter');
                const count = counterValues[productId] || 0;

                counter.textContent = count;

                if (count > 0) {
                    button.classList.add('expanded');
                } else {
                    button.classList.remove('expanded');
                }
            }

            // If we're currently on the cart page, re-render it
            if (document.querySelector('.nav-item[data-category="cart"]').classList.contains('active')) {
                renderShoppingCart();
            }
        }

        // Function to calculate subtotal
        function calculateSubtotal() {
            return coffeeProducts.reduce((total, product) => {
                return total + (counterValues[product.id] || 0) * product.price;
            }, 0);
        }

        // Function to calculate VAT
        function calculateVAT(subtotal) {
            return Math.round(subtotal * 0.075);
        }

        // Function to open size selection popup
        function openSizePopup(productId) {
            const popup = document.getElementById('sizePopup');
            popup.classList.add('active');
            popup.dataset.productId = productId;
        }

        // Function to close size selection popup
        function closeSizePopup() {
            const popup = document.getElementById('sizePopup');
            popup.classList.remove('active');
        }

        // Function to select size
        function selectSize(size) {
            const popup = document.getElementById('sizePopup');
            const productId = parseInt(popup.dataset.productId);
            sizeSelections[productId] = size;
            updateSizeButton(productId);
            closeSizePopup();
        }

        // Function to update size button
        function updateSizeButton(productId) {
            const sizeButton = document.getElementById(`size-btn-${productId}`);
            if (sizeButton) {
                sizeButton.textContent = sizeSelections[productId];
            }
        }

        // Function to handle category selection
        function selectCategory(category) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
            renderProducts(category);
        }

        // Function to place order
        function placeOrder() {
            alert('Your order has been placed!');
            // Here you would typically send the order to a backend server
            counterValues = {};
            sizeSelections = {};
            renderShoppingCart();
        }

        // Add event listeners to navbar items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (event) => {
                const category = event.currentTarget.dataset.category;
                selectCategory(category);
            });
        });

        // Add event listeners to size options
        document.querySelectorAll('.size-option').forEach(option => {
            option.addEventListener('click', (event) => {
                const size = event.currentTarget.dataset.size;
                selectSize(size);
            });
        });

        // Initial render
        window.onload = () => renderProducts('all');
    </script>
</body>

</html>